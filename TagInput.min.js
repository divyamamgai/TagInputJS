(function(c,a,b,e){if(("find" in Array.prototype)===false){Array.prototype.find=function(i,f){var h=this,d=h.length;if(d>0){for(var g=0;g<d;g++){if(i.apply(f,[h[g]])===true){return h[g]}}}return undefined}}a.TagInput=function(j){var l=c(j),m=l.attr("id")||(new Date()),i=c('<div class="TagInput"></div>').insertAfter(l),h=c("label[for="+m+"]",e),n={},f,o,k=[],d={ToString:function(){var p="",s=k.length,r=s-1;for(var q=0;q<s;q++){p+=k[q].Text+(q===r?"":n.Glue)}return p},UpdateValue:function(){var p=d.ToString();l.val(p);l.trigger("TagInput:UpdateValue",[p]);return p},AddTag:function(r){if((r!==undefined)&&(typeof r==="string")){var p=c.trim(r.replace(f," "));if(p.length>=n.MinLength){if(k.find(g.FindTag,p)===undefined){var q=c('<div class="TagItem Hide">'+p+'<span class="'+n.RemoveIcon+' RemoveTag"></span></div>');k.push({Text:p,$Tag:q});l.before(q);setTimeout(function(){q.removeClass("Hide")},21);l.trigger("TagInput:AddTag",[k,q,p]);return true}}}return false},RemoveTag:function(p,q){q=q||(p.index()-1);var r=k[q].Text;k.splice(q,1);p.remove();l.trigger("TagInput:RemoveTag",[k,r])},GetArray:function(){return k},GetTextArray:function(){var p=[],r=k.length;for(var q=0;q<r;q++){p.push(k[q].Text)}return p},GetTagCount:function(){return k.length},Private:undefined},g={FindTag:function(p){return p.Text==this},SetElementWidth:function(){var p=l.val().length+1;l.css("width",o*p)},TagInputOnClick:function(){l.focus()},TagInputOnMouseEnter:function(){i.addClass("Focus")},TagInputOnMouseLeave:function(){if(l.is(":focus")===false){if(k.length===0){h.removeClass(n.LabelAnimationClass)}i.removeClass("Focus")}},RemoveTagOnClick:function(p){p.stopPropagation();p.preventDefault();d.RemoveTag(c(this).parent());if(k.length===0){h.removeClass(n.LabelAnimationClass)}},TagItemOnClick:function(p){p.stopPropagation();p.preventDefault();if(l.val().length===0){var r=c(this),q=r.index()-1;l.val(k[q].Text).focus();d.RemoveTag(r,q)}},ElementOnFocus:function(){if(k.length===0){h.addClass(n.LabelAnimationClass)}i.addClass("Focus");l.val("").attr({minlength:n.MinLength,maxlength:n.MaxLength}).removeClass("Hidden")},ElementOnBlur:function(){if(k.length===0){h.removeClass(n.LabelAnimationClass)}i.removeClass("Focus");l.addClass("Hidden").attr({minlength:0,maxlength:524288});d.UpdateValue()},ElementOnKeyDown:function(p){if(p.keyCode===13){p.stopPropagation();p.preventDefault();if(d.AddTag(l.val())===true){l.val("")}}else{if(p.keyCode===8){if(k.length>0){if(l.val().length===0){d.RemoveTag(l.prev())}}}else{if(p.key===n.Glue){p.stopPropagation();p.preventDefault()}}}g.SetElementWidth()},ElementValidation:function(){l.val(String(l.val()).replace(f," "))},ProcessValue:function(){var s=l.val(),r=s.split(n.Glue),q=r.length;for(var p=0;p<q;p++){d.AddTag(r[p])}if(k.length>0){h.addClass(n.LabelAnimationClass);d.UpdateValue()}},Initialize:function(){n={MinLength:l.attr("data-MinLength")||1,MaxLength:l.attr("data-MaxLength"),Glue:l.attr("data-Glue")||",",RemoveIcon:l.attr("data-RemoveIcon")||"glyphicon glyphicon-remove",LabelAnimationClass:l.attr("data-LabelAnimationClass")||"Hide"};o=parseInt(l.css("font-size"));if(n.MinLength<=0){n.MinLength=1}if(n.Glue===" "){n.Glue=","}f=new RegExp(n.Glue,"g");if(h.length===0){l.before((h=c('<label for="'+m+'">Enter Tags</label>')))}else{h.prependTo(i)}i.on("click",g.TagInputOnClick).on("mouseenter",g.TagInputOnMouseEnter).on("mouseleave",g.TagInputOnMouseLeave).on("click",".RemoveTag",g.RemoveTagOnClick).on("click",".TagItem",g.TagItemOnClick);l.appendTo(i).on("focus",g.ElementOnFocus).on("blur",g.ElementOnBlur).on("keydown",g.ElementOnKeyDown).on("input",g.ElementValidation).on("change",g.ElementValidation).addClass("Hidden");g.ProcessValue()}};d.Private=g;g.Initialize();return d};c.fn.TagInput=function(){return this.each(function(){if(c.data(this,"TagInput")===undefined){c.data(this,"TagInput",new TagInput(this))}})};c(function(){c("input[data-TagInput]",e).TagInput()})})(jQuery,window,jQuery(window),document);